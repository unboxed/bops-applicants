<h1 class="govuk-heading-l">Add a response</h1>

<h2 class="govuk-heading-m">
  <%= @planning_application["site"]["address_1"] %>, 
  <%= @planning_application["site"]["address_2"] %>, 
  <%= @planning_application["site"]["postcode"] %>
</h2>

<p class="govuk-body">Planning application reference number: <%= @planning_application["reference"] %></p>

<p class="govuk-body">
  <strong>Application summary:</strong> <%= @planning_application["description"] %>
</p>

<p class="govuk-body">
  Thank you for taking the time to comment on this planning application. All comments are read and 
  considered by the planning officer before a decision on the application is reached
</p>

<p class="govuk-body">
  Please supply supporting evidence where it helps the planning officer better understand your concerns.
</p>

<p class="govuk-body">
  Your comments will be publicly available once any personal information or offensive language has 
  been removed from it. 
</p>

<p class="govuk-body">
  If you submit your email address with a comment on a planning application, we will inform you of 
  the decision once it's been made.
</p>

<%= form_with scope: :neighbour_response,
  url: planning_application_neighbour_responses_path(@planning_application),
  method: :post,
  builder: GOVUKDesignSystemFormBuilder::FormBuilder do |form| %>

  <div class="govuk-form-group">
    <h2 class="govuk-heading-m">About you</h2>
    <%= form.govuk_text_field :name %>
    <%= form.govuk_text_field :email, label: { text: "Email (optional)" } %>
    <div>
      <label for="address-autocomplete" class="govuk-label">Find your address</label>
      <div id="address-autocomplete-container"></div>
    </div>
  </div>

  <%= hidden_field_tag(:os_path, os_places_api_index_url) %>

  <%= form.govuk_radio_buttons_fieldset(:summary_tag, legend: { size: "m", text: "What do you think of the application?" }) do %>
    <%= form.govuk_radio_button :summary_tag, 'supportive', label: { text: 'I like it' } %>
    <%= form.govuk_radio_button :summary_tag, 'neutral', label: { text: "I don't mind it" } %>
    <%= form.govuk_radio_button :summary_tag, 'objection', label: { text: "I don't like it" } %>
  <% end %>

  <%= form.govuk_check_boxes_fieldset :tags, multiple: true, legend: { text: "What are your concerns?", size: "m" } do %>
    <%= form.govuk_check_box :tags, :design, label: { text: "The design, size and height of new buildings or extensions" } do %>
      <%= form.govuk_text_area :design, label: { text: "Tell us more" } %>
    <% end %>
    <%= form.govuk_check_box :new_use, :design, label: { text: "The impact of new uses of buildings or of land" } do %>
      <%= form.govuk_text_area :new_use, label: { text: "Tell us more" } %>
    <% end %>
    <%= form.govuk_check_box :tags, :privacy, label: { text: "Loss of light and the privacy of neighbours" } do %>
      <%= form.govuk_text_area :privacy, label: { text: "Tell us more" } %>
    <% end %>
    <%= form.govuk_check_box :tags, :disabled_access, label: { text: "Access for disabled people" } do %>
      <%= form.govuk_text_area :disabled_access, label: { text: "Tell us more" } %>
    <% end %>
    <%= form.govuk_check_box :tags, :noise, label: { text: "Noise from new uses" } do %>
      <%= form.govuk_text_area :noise, label: { text: "Tell us more" } %>
    <% end %>
    <%= form.govuk_check_box :tags, :traffic, label: { text: "The impact of development on traffic parking and road safety" } do %>
      <%= form.govuk_text_area :traffic, label: { text: "Tell us more" } %>
    <% end %>
    <%= form.govuk_check_box :tags, :other, label: { text: "Something else" } do %>
      <%= form.govuk_text_area :other, label: { text: "Tell us more" } %>
    <% end %>
  <% end %>

  <%= form.govuk_submit "Submit your response" %>
<% end %>
